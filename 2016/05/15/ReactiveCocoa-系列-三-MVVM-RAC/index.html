
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="BinHan的博客">
    <title>ReactiveCocoa 系列(三) MVVM + RAC - BinHan的博客</title>
    <meta name="author" content="Bin Han">
    
    
        <link rel="icon" href="https://ooo.0o0.ooo/2017/07/02/595891293dadc.png">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Bin Han","sameAs":["https://github.com/binhandev","https://weibo.com/u/3172823713"],"image":"https://ooo.0o0.ooo/2017/07/02/595891293dadc.png"},"articleBody":"对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其弊端，当控制器层变得越来越臃肿的时候，业务过于集中到控制器层，就会为为接下来的开发带来不便及代码的可维护性变低。\n所以这时候为了解决刚才的问题，MVVM 模式就“应孕而生”了，它不仅仅可以对原有 MVC 模式进行代码上的优化瘦身，更重要的一点是兼容 MVC 模式，我们可以对原有项目必要的地方进行 MVVM 模式的升级。   \n\n关于 MVVM 的理解\n在理解 MVVM 前，视图 View、模型 Model 是 MVC 中已经有的概念。在大部分开发的时候，table 可以说是我们使用最多的一个视图了，它里面的一个个 cell 视图的展示都需要设置一个模型 Model，通常会让 model 会作为 cell 的一个属性而存在，所以如果我们暂时不考虑 model 是从哪里冒出来的话，就会发现 model 和 cell 其实是一一对应的，而 cell 中展示的内容全部来自于 model 对象。现在我们在来看控制器 Controller，其实每一个 Controller 都会都应一个视图 View，那么这个视图的数据来源哪里呢，没错来自 Controller 本身，这也是造成 MVC  模式臃肿的根本原因，所以能不能对这个视图 View 也对应一个唯一的 model 呢？所以就产生了 ViewModel，这也就是 MVVM 模式的基础模型。当然这里每个人的理解可能会有不同。关于 ViewModel 的作用就是拆分业务后，将逻辑代码、网络请求等集中在 ViewModel 中进行处理。而之前的 Controller 层依旧负责自己视图的创建，然后将视图对应的 ViewModel 进行 bind 就好了。\nMVVM 结合 ReactiveCocoa这里又提到一个很重要的概念 bind。其实单单把业务通过 MVVM 拆分成更小更单一的模块时，那么 View 和 ViewModel 两者之间的数据的同步就可以交给函数式响应式编程框架 ReactiveCocoa，当然从某方面将，做数据的时时同步也有其他的方式，但是无论使用 delegate 或者 block，总是让我觉得写出来的代码不如通过 ReactiveCocoa bind 的方式显得优雅。因为系统中的 KVO、UIKit event、delegate、selector 等都增加了 RAC 支持，所以都不用去做很多跨函数的事，提供了一个单一的、统一的方法去处理异步的行为。\n关于MVVM的优缺点：优点：\n\n相对于 MVC 控制器层臃肿的逻辑与视图，是很难对某一块逻辑进行测试的，而剥离出来的 ViewModel 是一个独立的模块，所以对于逻辑部分可以进行单元测试。\n正因为 ViewModel 的独立性，所以代码的可复用性更高，在某两个模块只要业务逻辑相同，那么完全可以粘贴过来将需要更改的接口部分进行修改，\u0010即可。这里面可以使用类模板减少重复的代码书写。\n\n缺点：\n\n项目中类(.h/.m)文件会增多，这样可能会让代码编译速度和程序启动速度变慢，当然这我觉得这个效率其实是可以忽略的。\n从某方面讲，其实随着业务的逐渐庞大，是很难从根本上绝对避免功能上的耦合的，所以 ViewModel 的剥离的层级越多，也会相对增加项目结构的复杂度。比如一个 table 有 headerView，对应的 headerView 也会有一个 ViewModel，但是如果 headerView 的模块足够复杂的话，可能需要进一步的细分 headerView，那么就会增加更多的 ViewModel。\n结合 RAC，排错困难。\n\n最后，撸了一个 MVVM + RAC 的 demo，效果如下，通过搜索然后展示列表，当搜索结果为空时展示空数据视图。代码可以在Github中BlogDemo进行查看。\n    \n\n\n\n\n\n\n","dateCreated":"2016-05-15T21:53:45+08:00","dateModified":"2017-07-06T20:10:58+08:00","datePublished":"2016-05-15T21:53:45+08:00","description":"对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其弊端，当控制器层变得越来越臃肿的时候，业务过于集中到控制器层，就会为为接下来的开发带来不便及代码的可维护性变低。\n所以这时候为了解决刚才的问题，MVVM 模式就“应孕而生”了，它不仅仅可以对原有 MVC 模式进行代码上的优化瘦身，更重要的一点是兼容 MVC 模式，我们可以对原有项目必要的地方进行 MVVM 模式的升级。   ","headline":"ReactiveCocoa 系列(三) MVVM + RAC","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/"},"publisher":{"@type":"Organization","name":"Bin Han","sameAs":["https://github.com/binhandev","https://weibo.com/u/3172823713"],"image":"https://ooo.0o0.ooo/2017/07/02/595891293dadc.png","logo":{"@type":"ImageObject","url":"https://ooo.0o0.ooo/2017/07/02/595891293dadc.png"}},"url":"https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/","keywords":"移动开发, iOS"}</script>
    <meta name="description" content="对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其">
<meta name="keywords" content="移动开发,iOS">
<meta property="og:type" content="blog">
<meta property="og:title" content="ReactiveCocoa 系列(三) MVVM + RAC">
<meta property="og:url" content="https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/index.html">
<meta property="og:site_name" content="BinHan的博客">
<meta property="og:description" content="对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://binhandev.github.io/assets/blogImg/mvvm_1.jpeg">
<meta property="og:updated_time" content="2017-07-06T12:10:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ReactiveCocoa 系列(三) MVVM + RAC">
<meta name="twitter:description" content="对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其">
<meta name="twitter:image" content="https://binhandev.github.io/assets/blogImg/mvvm_1.jpeg">
    
    
        
    
    
        <meta property="og:image" content="https://ooo.0o0.ooo/2017/07/02/595891293dadc.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-1udptkpril81ozu8ifd8zpujn7ipu7lefxsiu5gxx0dpnzntdx6dusvki3ao.min.css">
    <!--STYLES END-->
    

    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?72a43f313d40f786cbe746db1a6574ec";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">BinHan的博客</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://ooo.0o0.ooo/2017/07/02/595891293dadc.png" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://ooo.0o0.ooo/2017/07/02/595891293dadc.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Bin Han</h4>
                
                    <h5 class="sidebar-profile-bio"><p>纸上得来终觉浅  绝知此事要躬行</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Search"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/binhandev" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://weibo.com/u/3172823713" target="_blank" rel="noopener" title="Weibo">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-weibo" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Weibo</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            ReactiveCocoa 系列(三) MVVM + RAC
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2016-05-15T21:53:45+08:00">
	
		    May 15, 2016
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>对于一个开发者来说, MVC 设计模式被广泛应用于各种语言的开发中，这在 iOS 开发中体现的尤为多，比如我们的控制器 Controller，视图 View，模型 Model，从名称中就可以体现出各自的作用及分工，Apple 也是推荐我们使用 MVC 模式进行程序设计及开发。其实绝大部分时候 MVC 模式基本是可以满足我们的业务需求的，可是随着业务的膨胀，开发人员变动等因素，MVC 模式也暴露了其弊端，当控制器层变得越来越臃肿的时候，业务过于集中到控制器层，就会为为接下来的开发带来不便及代码的可维护性变低。</p>
<p>所以这时候为了解决刚才的问题，MVVM 模式就“应孕而生”了，它不仅仅可以对原有 MVC 模式进行代码上的优化瘦身，更重要的一点是兼容 MVC 模式，我们可以对原有项目必要的地方进行 MVVM 模式的升级。   </p>
<a id="more"></a>
<h3 id="关于-MVVM-的理解"><a href="#关于-MVVM-的理解" class="headerlink" title="关于 MVVM 的理解"></a>关于 MVVM 的理解</h3><p><img src="/assets/blogImg/mvvm_1.jpeg" alt="Alt text"></p>
<p>在理解 MVVM 前，视图 View、模型 Model 是 MVC 中已经有的概念。在大部分开发的时候，table 可以说是我们使用最多的一个视图了，它里面的一个个 cell 视图的展示都需要设置一个模型 Model，通常会让 model 会作为 cell 的一个属性而存在，所以如果我们暂时不考虑 model 是从哪里冒出来的话，就会发现 model 和 cell 其实是一一对应的，而 cell 中展示的内容全部来自于 model 对象。现在我们在来看控制器 Controller，其实每一个 Controller 都会都应一个视图 View，那么这个视图的数据来源哪里呢，没错来自 Controller 本身，这也是造成 MVC  模式臃肿的根本原因，所以能不能对这个视图 View 也对应一个唯一的 model 呢？所以就产生了 ViewModel，这也就是 MVVM 模式的基础模型。当然这里每个人的理解可能会有不同。关于 ViewModel 的作用就是拆分业务后，将逻辑代码、网络请求等集中在 ViewModel 中进行处理。而之前的 Controller 层依旧负责自己视图的创建，然后将视图对应的 ViewModel 进行 bind 就好了。</p>
<h3 id="MVVM-结合-ReactiveCocoa"><a href="#MVVM-结合-ReactiveCocoa" class="headerlink" title="MVVM 结合 ReactiveCocoa"></a>MVVM 结合 ReactiveCocoa</h3><p>这里又提到一个很重要的概念 bind。其实单单把业务通过 MVVM 拆分成更小更单一的模块时，那么 View 和 ViewModel 两者之间的数据的同步就可以交给函数式响应式编程框架 <a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="noopener">ReactiveCocoa</a>，当然从某方面将，做数据的时时同步也有其他的方式，但是无论使用 delegate 或者 block，总是让我觉得写出来的代码不如通过 <a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="noopener">ReactiveCocoa</a> bind 的方式显得优雅。因为系统中的 KVO、UIKit event、delegate、selector 等都增加了 RAC 支持，所以都不用去做很多跨函数的事，提供了一个单一的、统一的方法去处理异步的行为。</p>
<h3 id="关于MVVM的优缺点："><a href="#关于MVVM的优缺点：" class="headerlink" title="关于MVVM的优缺点："></a>关于MVVM的优缺点：</h3><p>优点：</p>
<ul>
<li>相对于 MVC 控制器层臃肿的逻辑与视图，是很难对某一块逻辑进行测试的，而剥离出来的 ViewModel 是一个独立的模块，所以对于逻辑部分可以进行单元测试。</li>
<li>正因为 ViewModel 的独立性，所以代码的可复用性更高，在某两个模块只要业务逻辑相同，那么完全可以粘贴过来将需要更改的接口部分进行修改，即可。这里面可以使用类模板减少重复的代码书写。</li>
</ul>
<p>缺点：</p>
<ul>
<li>项目中类(.h/.m)文件会增多，这样可能会让代码编译速度和程序启动速度变慢，当然这我觉得这个效率其实是可以忽略的。</li>
<li>从某方面讲，其实随着业务的逐渐庞大，是很难从根本上绝对避免功能上的耦合的，所以 ViewModel 的剥离的层级越多，也会相对增加项目结构的复杂度。比如一个 table 有 headerView，对应的 headerView 也会有一个 ViewModel，但是如果 headerView 的模块足够复杂的话，可能需要进一步的细分 headerView，那么就会增加更多的 ViewModel。</li>
<li>结合 RAC，排错困难。</li>
</ul>
<p>最后，撸了一个 MVVM + RAC 的 demo，效果如下，通过搜索然后展示列表，当搜索结果为空时展示空数据视图。代码可以在Github中<a href="https://github.com/binhandev/BlogDemo" target="_blank" rel="noopener">BlogDemo</a>进行查看。</p>
<video width="308" height="570" autoplay controls><br>    <source src="http://binhandev.github.io/assets/blogImg/mvvm.mov"><br></video>







            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/iOS/">iOS</a> <a class="tag tag--primary tag--small t-link" href="/tags/移动开发/">移动开发</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/07/20/这两个月/" data-tooltip="这两个月" aria-label="PREVIOUS: 这两个月">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/05/03/ReactiveCocoa-系列-二-常用-API/" data-tooltip="ReactiveCocoa 系列(二)特定场景 API 的使用" aria-label="NEXT: ReactiveCocoa 系列(二)特定场景 API 的使用">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Weibo">
                    <i class="fa fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Bin Han. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/07/20/这两个月/" data-tooltip="这两个月" aria-label="PREVIOUS: 这两个月">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/05/03/ReactiveCocoa-系列-二-常用-API/" data-tooltip="ReactiveCocoa 系列(二)特定场景 API 的使用" aria-label="NEXT: ReactiveCocoa 系列(二)特定场景 API 的使用">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Weibo">
                    <i class="fa fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/" title="Share on Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/">
                    <i class="fa fa-weibo" aria-hidden="true"></i><span>Share on Weibo</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/">
                    <i class="fa fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i><span>Share on Facebook</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://ooo.0o0.ooo/2017/07/02/595891293dadc.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Bin Han</h4>
        
            <div id="about-card-bio"><p>纸上得来终觉浅  绝知此事要躬行</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Software Engineer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Hangzhou China
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/02/17/一个有爱的404页面/">
                            <h3 class="media-heading">一个有爱的404页面</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 17, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>在支付宝的爱心支付和<a href="http://bbs.ngacn.cc/" target="_blank" rel="noopener">恩基爱</a>看到一些捐助活动偶尔也会献些爱心，当看到腾讯的这个<a href="http://www.qq.com/404/" target="_blank" rel="noopener">公益 404 页面</a>真是喜欢的不得了，更重要的在 <a href="https://github.com/hexojs/hexo" target="_blank" rel="noopener">hexo</a> 中接入也很简单，当然从某种意义上并不希望经常看到它。</p>
<ul>
<li>在项目根目录source文件夹下直接创建404.html页面</li>
<li>编辑下面html代码，如果定制超链接，修改“homePageUrl”、“homePageName”两个参数即可。</li>
<li>一定要设置layout:false(还有三个短横线)，不然会被hexo解析。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">layout: false</span><br><span class="line">---</span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>宝贝，公益404带你们回家<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://www.qq.com/404/search_children.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">homePageUrl</span>=<span class="string">"http://yoursite.com/yourPage.html"</span> <span class="attr">homePageName</span>=<span class="string">"回到我的主页"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/04/10/对AFNetworking的链式二次封装/">
                            <h3 class="media-heading">对 AFNetworking 的链式二次封装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 10, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>之前在使用 <a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="noopener">AFNetworking</a>都会进行二次封装便于开发使用，但是通常的结构是一种集中式的封装，如下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)asyncWithQueryString:(<span class="built_in">NSString</span> *)query params:(<span class="built_in">NSDictionary</span> *)params </span><br><span class="line"> requestType:(RequestType)requestType </span><br><span class="line"> completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSDictionary</span> *result, <span class="built_in">NSError</span> *error))handler；</span><br></pre></td></tr></table></figure>
<p>这种结构的弊端在于，每次调用的时候都需要传递所有的参数，而即使没有参数也需要传递 nil 值站位，尤其如果一开始没有封装好导致后期要在方法里面添加一个参数，那么我们所有调用此方法的地方都需要进行修改，虽然这种可能性很小。所以后来采用了链式结构进行了封装。使用这种方法主要是借鉴了IOS中的布局适配框架 <a href="https://github.com/SnapKit/Masonry" target="_blank" rel="noopener">Masonry</a>，关于链式编程更多的了解可以参考：</p>
<ul>
<li><a href="https://github.com/Wzxhaha/WZXProgrammingIdeas" target="_blank" rel="noopener">https://github.com/Wzxhaha/WZXProgrammingIdeas</a></li>
<li><a href="http://www.ithao123.cn/content-1780874.html" target="_blank" rel="noopener">http://www.ithao123.cn/content-1780874.html</a></li>
</ul></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/04/12/为AFNetWorking添加接口缓存/">
                            <h3 class="media-heading">为 AFNetWorking 添加接口数据缓存</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 12, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>NSURLSession 是iOS7之后对 NSURLConnection 更进一步的优化封装，可通过 NSURLSessionConfiguration 对其进行初始化设置，其中 requestCachePolicy 属性设置就是配置获取得到 NSURLResponse 之后的缓存策略：</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/05/17/UIBezierPath配合CAShapeLayer画一些有趣的图形/">
                            <h3 class="media-heading">UIBezierPath 配合 CAShapeLayer 画一些有趣的图形</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 17, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>CAShapeLayer是CALayer的子类，但是比CALayer更灵活，配合一个神奇的属性path用这个属性配合上 UIBezierPath 这个类就可以达到超神的效果。</p>
<h3 id="玩一下-UIBezierPath"><a href="#玩一下-UIBezierPath" class="headerlink" title="玩一下 UIBezierPath"></a>玩一下 UIBezierPath</h3><p>UIBezierPath 顾名思义，这是用贝塞尔曲线的方式来构建一段弧线，你可以用任意条弧线来组成你想要的形状，它包含起始点、终点、及控制点三个参数。如下图红色矩形范围内的白色背景，最上面就是一条有弧度的曲线。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/08/05/链式创建UILabel和UIButton/">
                            <h3 class="media-heading">链式创建 UILabel 和 UIButton</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Aug 5, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>其实最早接触链式编程是使用 <a href="https://github.com/SnapKit/Masonry" target="_blank" rel="noopener">Masonry</a> 框架的时候，对于之前大部分写集中式编码的人而言会觉得眼前一亮，当所有的操作通过点号(.)符号链接起来时候之后，代码的可读性大大的增强了。所以在之前就使用这种方式对 <a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="noopener">AFNetworking</a> 进行了二次封装，<a href="http://binhan1029.github.io/2015/07/11/%E5%AF%B9AFNetworking%E7%9A%84%E9%93%BE%E5%BC%8F%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/" target="_blank" rel="noopener">链接地址</a>。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/08/15/封装AVPlayer-包含触摸滑动快进-快退-调节音量-及相关注意点/">
                            <h3 class="media-heading">封装 AVPlayer (包含触摸滑动快进/快退 调节音量)及相关注意点</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Aug 15, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>在iOS视频开发中，传统的方案可以直接使用系统的 MPMoviePlayerController 既可以直接将系统的播放页面掉出来，更贴心的为我们添加了控制条，全屏放大及暂停按钮。但是实际中我们可以需要针对播放器做更多的自定义设置，继而更多的是会采用 AVPlayer，因为 AVPlayer 提供了更为强大的功能，虽然在使用的过程会比较麻烦，但是确实能为我们的 app 提供更好的视频播放体验提供前提。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/11/04/UIKit的性能优化/">
                            <h3 class="media-heading">UIKit 的性能优化</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Nov 4, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>主要为阅读一些博客和书籍，对一些 UIKit 方便的性能优化的一些知识点进行了整理</p>
<h3 id="尽量避免图层的混合"><a href="#尽量避免图层的混合" class="headerlink" title="尽量避免图层的混合"></a>尽量避免图层的混合</h3><ul>
<li>避免使用控件的 opaque 属性将其透明，当然默认的情况下 UIVie 的 opaque 属性就是 true，同时尽量将UIView的背景颜色设置与其父控件相同且不是透明的</li>
<li>没有特殊情况下不要设置控件的 alpha 值降低透明度</li>
<li>使用 UIImage 尽量使用没有带 alpha 通道图片</li>
</ul>
<h4 id="图层的混合"><a href="#图层的混合" class="headerlink" title="图层的混合"></a>图层的混合</h4><p>首先对于像素点，屏幕上的每一个点就是一个像素，像素有R/G/B三种颜色构成，某些时候还要有 alpha 值。</p>
<p>举个栗子，我们将两个图层混合，上层的是蓝色（R=0/G=0/B=1）,设置其透明度为50%，下层是红色（R=1/G=0/B=0）,那么最终我们看到的效果将是紫色（R=0.5/G=0/B=0.5）,这种颜色的混合，尤其上层的图层有透明度的时候，会小号一定的GPU资源，想避免这种情况，尽量直接将上层的图层透明度设置为100%，这样GPU就会忽略下面的所有图层，避免了过多不要的运算。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/12/03/JSPatch使用小结/">
                            <h3 class="media-heading">JSPatch 使用小结</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 3, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>众所周知，iOS 应用审核机制，所以当我们的线上应用面对突如起来的 bug 的时候会显得很手足无措，有时候仅仅可能就是添加一两行代码解决这个问题却要因为审核等待一周或者美国人过节就会有甚至更长的审核周期。所以hoxfix热修复的作用简直就是掉炸天的功能啊。而 JSPatch 就是这样一个极小的轻量级框架，它可以使用 JavaScript 调用任何 Objective-C 的原生接口，替换任意 Objective-C 原生方法。目前主要用于下发 JS 脚本替换原生 Objective-C 代码，实时修复线上 bug。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/12/25/Mac下的Python环境搭建及MySQL-python模块安装/">
                            <h3 class="media-heading">Mac 下的 Python 环境搭建及 MySQL-python 模块安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 25, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h3 id="关于环境"><a href="#关于环境" class="headerlink" title="关于环境"></a>关于环境</h3><p><strong>MAC OS</strong> :10.10</p>
<p><strong>PyCharm</strong> :推荐使用，最开始使用的是 Sublime Text 加终端的方式，但是来回切换实在太繁琐，后来切换到了 PyCharm 下，好的 IDE 真是会使效率事半功倍，更重要还提供了一些很好用的功能用于<a href="https://www.djangoproject.com/" target="_blank" rel="noopener">Django</a>框架开发。</p>
<h3 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h3><p>由于之前一直做移动开发，并没有真正使用过 MySQL，而 MySQL 数据库在第一次安装后出现了各种莫名其妙的问题，无论是使用系统偏好设置启动，还是终端启动服务均失败，总是出现各种 <a name="fenced-code-block">permission failed或Can’t connect to local MySQL server through socket ‘/tmp/mysql.sock’</a>等问题，各种方法使用后无解还是尝试重新安装。MySQL<a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">下载地址</a>，一定要选择对应的系统版本及位数。</p>
<p>重新安装前一定要将原本机器上的MySQL删除干净，建议使用终端方法进行删除，<font color="red">注意安装完成后会弹出提示，提示中 password 就是 MySQL 的 root 密码</font>：</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://binhandev.github.io/2015/12/31/过去的2015/">
                            <h3 class="media-heading">过去的2015</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 31, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                24 posts found
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://ooo.0o0.ooo/2017/07/02/5958919e5e7c2.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-yhuo2grt8r7qkqumzgjoglkfbicl1thukjgmla6jopu56zpcowfedi5zjcor.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://binhandev.github.io/2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/';
                 
                    this.page.identifier = '2016/05/15/ReactiveCocoa-系列-三-MVVM-RAC/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'http-binhandev-github-io';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('8D50WOTW8Q', '1b7cf77512c3f6325bde5b552b9894ff');
        var algoliaIndex = algoliaClient.initIndex('tranquilpeak');
    </script>


    </body>
</html>
